import Head from 'next/head'
import styles from '../styles/Home.module.css'
import StudyToUkraine from '../src/studyToUkraine'
import Inscription from '../src/inscription'
import isObjectNull from "../isObjectNull";
import client from "../client";
import RaisonStudyToUkraine from "../src/raisonStudyToUkraine";
import FavoriteStudy from "../src/favoriteStudy";

export default function Home(props) {
  const {
      studyToUkraineProps,
      inscriptionProps,
      raisonStudyToUkraine,
      favoriteStudyProps
  }  = props;
  return (
    <div className={styles.container}>
      <Head>
        <title>الدراسة في أوكرانيا</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/logo.png" />
      </Head>
      <StudyToUkraine study={studyToUkraineProps}/>
      <Inscription inscription={inscriptionProps}/>
      <RaisonStudyToUkraine raisonToStudy={raisonStudyToUkraine}/>
      <FavoriteStudy favorite={favoriteStudyProps}/>
    </div>
  )
}

export async function getServerSideProps(context){
    var data_home = await client.fetch("*[_id=='home'][0]{titreStudyInUkraine,sousTitreStudyInUkraine,buttonStudyInUkraine," +
        "titreAdmission,listAdmission,imageComingUkraine,titleComingUkraine,descriptionComingUkraine,buttonComingUkraine," +
        "sousTitleStudyToUkraine,titleStudyToUkraine,buttonStudyToUkraine,listStudyUkraine," +
        "titleFavoriteStudyProgram,descriptionFavoriteStudyProgram,imageFavoriteStudyProgram,buttonFavoriteStudyProgram,listDirectory}");
    const studyToUkraineProps = {
        titreStudyInUkraine:isObjectNull(data_home.titreStudyInUkraine),
        sousTitreStudyInUkraine:isObjectNull(data_home.sousTitreStudyInUkraine),
        buttonStudyInUkraine:isObjectNull(data_home.buttonStudyInUkraine),
    }
    const inscriptionProps = {
        titreAdmission:isObjectNull(data_home.titreAdmission),
        listAdmission:isObjectNull(data_home.listAdmission),
        imageComingUkraine:isObjectNull(data_home.imageComingUkraine),
        titleComingUkraine:isObjectNull(data_home.titleComingUkraine),
        descriptionComingUkraine:isObjectNull(data_home.descriptionComingUkraine),
        buttonComingUkraine:isObjectNull(data_home.buttonComingUkraine)
    }
    const raisonStudyToUkraine = {
        sousTitleStudyToUkraine:isObjectNull(data_home.sousTitleStudyToUkraine),
        titleStudyToUkraine:isObjectNull(data_home.titleStudyToUkraine),
        buttonStudyToUkraine:isObjectNull(data_home.buttonStudyToUkraine),
        listStudyUkraine:isObjectNull(data_home.listStudyUkraine),
    }
    const favoriteStudyProps = {
        titleFavoriteStudyProgram:isObjectNull(data_home.titleFavoriteStudyProgram),
        descriptionFavoriteStudyProgram:isObjectNull(data_home.descriptionFavoriteStudyProgram),
        imageFavoriteStudyProgram:isObjectNull(data_home.imageFavoriteStudyProgram),
        buttonFavoriteStudyProgram:isObjectNull(data_home.buttonFavoriteStudyProgram),
        listDirectory:isObjectNull(data_home.listDirectory),
    }
    return {
      props: {
        studyToUkraineProps,
        inscriptionProps,
        raisonStudyToUkraine,
        favoriteStudyProps
      },
    }
}